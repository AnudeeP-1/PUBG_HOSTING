{"ast":null,"code":"var _jsxFileName = \"D:\\\\JAI_PUBG\\\\FRONT-END\\\\pubg_tournment\\\\src\\\\Pages\\\\login.js\";\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport ErrorModel from '../UIElements/Error';\nimport firebase from './firebase.js';\nimport Card from '../UIElements/Card';\nimport LoadingSpinner from '../UIElements/LoadingSpinner';\nimport { VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH } from '../FormElements/validater';\nimport Input from '../FormElements/Input';\nimport Button from '../FormElements/Button';\nimport { useForm } from '../Hook/Form-hook';\nimport './login.css';\n\nconst Login = props => {\n  const [isLoading, setLoading] = useState(false);\n  const [otp, setotp] = useState(null);\n  const [error, seterror] = useState();\n  const history = useHistory();\n  const [formstate, inputHandler, setFormData] = useForm({\n    phone: {\n      value: '',\n      isValid: false\n    },\n    otp: undefined\n  }, false);\n\n  const sendOTP = event => {\n    event.preventDefault();\n    setLoading(true);\n    setFormData({ ...formstate.inputs,\n      phone: { ...formstate.inputs.phone,\n        isValid: false\n      }\n    });\n\n    try {\n      var recaptcha = new firebase.auth.RecaptchaVerifier('recaptcha', {\n        size: \"invisible\",\n        callback: function (response) {\n          console.log(\"captcha resolved\");\n        }\n      });\n      var number = '+91' + formstate.inputs.phone.value;\n      firebase.auth().signInWithPhoneNumber(number, recaptcha).then(function (e) {\n        setotp(e);\n        setLoading(false);\n      }).catch(function (error) {\n        seterror(\"Your internet seems to be slow or Your number is blocked due to too many request, Try again after sometime\");\n        setLoading(false);\n      });\n    } catch (err) {\n      setLoading(false);\n      seterror(\"Try again\");\n    }\n  };\n\n  const verifyOTP = event => {\n    event.preventDefault();\n    setLoading(false);\n    otp.confirm(formstate.inputs.otp.value).then(function (result) {\n      console.log(result.user);\n      history.push('/');\n    }).catch(function (error) {\n      console.error(error);\n      seterror(\"OTP verification failed\");\n    });\n    setLoading(false);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, error && /*#__PURE__*/React.createElement(ErrorModel, {\n    error: error,\n    onClear: () => {\n      seterror();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: \"authentication\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, isLoading && /*#__PURE__*/React.createElement(LoadingSpinner, {\n    asOverlay: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Continue with your phone\"), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"auth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    element: \"input\",\n    id: \"phone\",\n    type: \"phone\",\n    label: \"Enter your valid phone number\",\n    value: \"\",\n    validators: [VALIDATOR_REQUIRE(), VALIDATOR_MINLENGTH(6)],\n    errorText: \"Please fill this with valid number\",\n    onInput: inputHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: sendOTP,\n    disabled: !formstate.isValid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, \"SEND OTP\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"recaptcha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 10\n    }\n  })), !!otp && /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    element: \"input\",\n    id: \"otp\",\n    type: \"text\",\n    label: \"Enter OTP you have recieved\",\n    value: \"\",\n    validators: [VALIDATOR_REQUIRE(), VALIDATOR_MINLENGTH(6)],\n    errorText: \"Enter the OTP\",\n    onInput: inputHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    onClick: verifyOTP,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, \"Verify\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"recaptcha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 10\n    }\n  }))));\n};\n\nexport default Login;","map":{"version":3,"sources":["D:/JAI_PUBG/FRONT-END/pubg_tournment/src/Pages/login.js"],"names":["React","useState","useHistory","ErrorModel","firebase","Card","LoadingSpinner","VALIDATOR_REQUIRE","VALIDATOR_MINLENGTH","Input","Button","useForm","Login","props","isLoading","setLoading","otp","setotp","error","seterror","history","formstate","inputHandler","setFormData","phone","value","isValid","undefined","sendOTP","event","preventDefault","inputs","recaptcha","auth","RecaptchaVerifier","size","callback","response","console","log","number","signInWithPhoneNumber","then","e","catch","err","verifyOTP","confirm","result","user","push"],"mappings":"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","sourcesContent":["import React,{useState} from 'react';\r\nimport {useHistory} from 'react-router-dom'\r\n\r\nimport ErrorModel from '../UIElements/Error';\r\nimport firebase from './firebase.js';\r\nimport Card from '../UIElements/Card'\r\nimport LoadingSpinner from '../UIElements/LoadingSpinner'\r\nimport {VALIDATOR_REQUIRE, VALIDATOR_MINLENGTH} from '../FormElements/validater'\r\nimport Input from '../FormElements/Input'\r\nimport Button from '../FormElements/Button'\r\nimport {useForm} from '../Hook/Form-hook'\r\nimport './login.css'\r\n\r\nconst Login=props=>{\r\n    const [isLoading,setLoading]=useState(false);\r\n    const [otp,setotp]=useState(null);\r\n    const [error,seterror]=useState();\r\n    const history=useHistory();\r\n    const [formstate,inputHandler,setFormData]=useForm(\r\n        {\r\n        phone:{\r\n            value:'',\r\n            isValid:false\r\n        },\r\n        otp:undefined\r\n        },false);\r\n\r\n  const sendOTP=(event)=>{\r\n      event.preventDefault();\r\n      setLoading(true);\r\n      setFormData({\r\n          ...formstate.inputs,\r\n          phone:{\r\n              ...formstate.inputs.phone,\r\n              isValid:false\r\n          }\r\n      })\r\n      try{\r\n    var recaptcha = new firebase.auth.RecaptchaVerifier('recaptcha',{\r\n        size:\"invisible\",\r\n        callback:function (response){\r\n            console.log(\"captcha resolved\");\r\n        }\r\n    });\r\n    var number = '+91'+formstate.inputs.phone.value;\r\n    firebase.auth().signInWithPhoneNumber(number,recaptcha).then( function(e) {\r\n        setotp(e);\r\n        setLoading(false);\r\n      })\r\n      .catch(function (error) {\r\n          seterror(\"Your internet seems to be slow or Your number is blocked due to too many request, Try again after sometime\");\r\n          setLoading(false);\r\n      });\r\n    }catch(err){\r\n        setLoading(false);\r\n        seterror(\"Try again\")\r\n    }\r\n    \r\n  }\r\n\r\n  const verifyOTP=(event)=>{\r\n    event.preventDefault();\r\n    setLoading(false);\r\n    otp.confirm(formstate.inputs.otp.value).then(function (result) {\r\n        console.log(result.user);\r\n        history.push('/');\r\n     }).catch(function (error) {\r\n        console.error( error);\r\n        seterror(\"OTP verification failed\");\r\n    });\r\n    setLoading(false);\r\n  }\r\n\r\n    return(\r\n    <React.Fragment>    \r\n\r\n    {error && <ErrorModel error={error} onClear={()=>{seterror()}}/>}\r\n    <Card className=\"authentication\">\r\n        \r\n    {isLoading && <LoadingSpinner asOverlay/>}\r\n        <h2>Continue with your phone</h2>\r\n        <form className=\"auth\">\r\n            <Input\r\n                element='input'\r\n                id=\"phone\"\r\n                type=\"phone\"\r\n                label='Enter your valid phone number'\r\n                value=''\r\n                validators={[VALIDATOR_REQUIRE(),VALIDATOR_MINLENGTH(6)]}\r\n                errorText=\"Please fill this with valid number\"\r\n                onInput={inputHandler}\r\n            />    \r\n            <Button \r\n                type=\"submit\" \r\n                onClick={sendOTP}\r\n                disabled={!formstate.isValid}>\r\n                     SEND OTP\r\n            </Button>\r\n            \r\n         <div id=\"recaptcha\"></div>\r\n        </form>\r\n        {!!otp && <form>\r\n            <Input\r\n                element='input'\r\n                id=\"otp\"\r\n                type=\"text\"\r\n                label='Enter OTP you have recieved'\r\n                value=''\r\n                validators={[VALIDATOR_REQUIRE(),VALIDATOR_MINLENGTH(6)]}\r\n                errorText=\"Enter the OTP\"\r\n                onInput={inputHandler}\r\n            />    \r\n            <Button \r\n                type=\"submit\" \r\n                onClick={verifyOTP}>\r\n                     Verify\r\n            </Button>\r\n            \r\n         <div id=\"recaptcha\"></div>\r\n        </form>}\r\n    </Card>\r\n    </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}